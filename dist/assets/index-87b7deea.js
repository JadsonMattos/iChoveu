(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}})();const I=async i=>{const s=`https://api.weatherapi.com/v1/search.json?lang=pt&key=8cb8c18af2834fc6b65180142232706&q=${i}`;try{const e=await(await fetch(s)).json();return e.length===0&&window.alert("Nenhuma cidade encontrada"),e}catch(t){return console.error(t),[]}},b=async i=>{const s=`https://api.weatherapi.com/v1/current.json?key=8cb8c18af2834fc6b65180142232706&q=${i}`,e=await(await fetch(s)).json();return{temp:e.current.temp_c,condition:e.current.condition.text,icon:e.current.condition.icon}};function n(i,c,s=""){const t=document.createElement(i);return t.classList.add(...c.split(" ")),t.textContent=s,t}function x(i){const{date:c,maxTemp:s,minTemp:t,condition:e,icon:o}=i,a=new Date(c);a.setDate(a.getDate()+1);const d=a.toLocaleDateString("pt-BR",{weekday:"short"}),r=n("div","forecast"),l=n("p","forecast-weekday",d),m=n("span","forecast-temp max","max"),C=n("span","forecast-temp max",`${s}º`),g=n("span","forecast-temp min","min"),u=n("span","forecast-temp min",`${t}º`),p=n("div","forecast-temp-container");p.appendChild(m),p.appendChild(g),p.appendChild(C),p.appendChild(u);const f=n("p","forecast-condition",e),y=n("img","forecast-icon");y.src=o.replace("64x64","128x128");const h=n("div","forecast-middle-container");return h.appendChild(p),h.appendChild(y),r.appendChild(l),r.appendChild(h),r.appendChild(f),r}function v(i){const c=document.getElementById(i);for(;c.firstChild;)c.removeChild(c.firstChild)}function T(i){const c=document.getElementById("forecast-container"),s=document.getElementById("weekdays");v("weekdays"),i.forEach(t=>{const e=x(t);s.appendChild(e)}),c.classList.remove("hidden")}function O(i){const{name:c,country:s,temp:t,condition:e,icon:o,url:a}=i,d=n("li","city"),r=n("div","city-heading"),l=n("h2","city-name",c),m=n("p","city-country",s);r.appendChild(l),r.appendChild(m);const C=n("p","city-temp",`${t}º`),g=n("p","city-condition",e),u=n("div","city-temp-container");u.appendChild(g),u.appendChild(C);const p=n("img","condition-icon");p.src=o.replace("64x64","128x128");const f=n("div","city-info-container");f.appendChild(u),f.appendChild(p),d.appendChild(r),d.appendChild(f);const y=n("button","city-forecast-button","Ver previsão");async function h(w){const L=`https://api.weatherapi.com/v1/forecast.json?lang=pt&key=8cb8c18af2834fc6b65180142232706&q=${w}&days=7`;return(await(await fetch(L)).json()).forecast.forecastday.map(E=>({date:E.date,maxTemp:E.day.maxtemp_c,minTemp:E.day.mintemp_c,condition:E.day.condition.text,icon:E.day.condition.icon}))}return y.addEventListener("click",async()=>{const w=await h(a);T(w)}),d.appendChild(y),d}async function N(i){i.preventDefault(),v("cities");const s=document.getElementById("search-input").value,t=await I(s),e=t.map(a=>b(a.url)),o=await Promise.all(e);try{const a=document.querySelector("#cities");a.innerHTML="",o.forEach((d,r)=>{const l={name:t[r].name,country:t[r].country,temp:d.temp,condition:d.condition,icon:d.icon,url:t[r].url},m=O(l);a.appendChild(m)})}catch(a){console.error(a)}}document.getElementById("search-form").addEventListener("submit",N);document.getElementById("close-forecast").addEventListener("click",()=>{document.getElementById("forecast-container").classList.add("hidden")});
